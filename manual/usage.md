# 使用帮助

本页面介绍如何通过可视化管理后台进行日常操作。

## 登录
- 打开浏览器访问：`http://localhost:3000`
- **账号登录**：默认管理员账号，输入用户名密码即可。
- **SSO 登录**：若系统配置了 OIDC 单点登录，点击“使用 SSO 登录”即可跳转认证。

## 首页概览
- **运行状态**：直观查看集群中的节点数、后端数、总容量与已用容量概览。
- **快速入口**：顶部导航提供各核心模块的快速跳转。

## 存储管理
- **新增后端**：支持 Local、S3、WebDAV、OneDrive 等多种协议接入。
- **连接测试**：填写配置后，务必先点击“连接测试”确保网络连通性。
- **数据策略**：
  - `正常`：承接新对象写入与读取。
  - `禁止调度`：不再接受新写入请求，但已有数据可读。
  - `驱逐数据`：主动迁移该后端数据。系统将生成迁移任务，将数据迁移至其他正常后端。
  - `离线`：彻底断开连接。
- **一致性校验**：
  - 在后端详情中可发起 **全量校验**（Verify Backend），系统会遍历该后端所有分片并比对物理大小与元数据是否一致。
  - 发现异常（Mismatched）的分片将被标记为 `Failed`，待副本修复任务处理。

### 一键迁移（数据驱逐）
1. 确保集群内有其他容量充足且策略为“正常”的后端。
2. 将待迁移后端的策略修改为 **驱逐数据**。
3. 系统将后台生成迁移任务，你可以在“监控 -> 副本维护队列”查看进度。
4. **速率限制**：可在“设置 -> 通用设置”中配置全局迁移限速（Evacuate Limit），避免迁移任务占用过高带宽影响正常业务。

## Bucket 管理
- **创建/管理**：可视化创建存储桶，配置 **默认副本数**（Replication Factor）。
- **权限控制**：配合用户管理模块，可细粒度控制用户对 Bucket 的读写权限。

## 监控与任务
系统提供多维度的任务队列与健康监控：
- **任务队列**：展示正在进行的异步任务，如数据迁移（Evacuation）。
- **缓存状态**：实时观测节点的 L1(内存)/L2(磁盘) 缓存命中率与空间占用。
- **异常对象**：展示副本数不足或校验失败的对象。可在此手动发起 **异常修复校验**（Verify Anomalies）。
- **副本维护队列**：展示由 `Replication Repair` 任务生成的副本补全计划及执行进度。
- **定时任务状态**：监控垃圾回收（GC）、元数据备份、副本修复扫描等 Cron 任务的执行记录。

## 设置
- **通用设置**：
  - **对象分片 (Chunk Size)**：调整系统切分大文件的基础粒度（默认 20MB）。
  - **垃圾回收 (GC)**：配置 GC 的执行周期与数据保留时间。
  - **副本修复计划**：配置系统定时扫描异常副本的频率。
- **元数据备份**：
  - 支持 **增量备份** 到本地文件系统。
  - 可配置备份模式（Simple 仅索引 / Full 含所有元数据）与 Cron 执行计划。
- **用户管理**：创建多用户，支持重置密码、修改状态（Active/Disabled）及分配 Bucket 读写权限。
- **密钥管理**：为每个用户生成/重置 S3 兼容的 Access Key / Secret Key。

## 常见问题
- **无法登录**：检查 `.env` 中的 `ADMIN_USER` 配置，或确认 SSO (OIDC) 连接是否正常。
- **迁移缓慢**：检查“通用设置”中的迁移限速配置及源/目标后端的带宽。
- **副本数不足**：确认是否有足够的、策略为“正常”的后端可供副本写入。
